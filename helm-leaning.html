<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helm é ˜èˆªå“¡ï¼šçµ¦ SRE çš„å¾é›¶ä¸Šæ‰‹æŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
            /* Warm neutral background */
            color: #334155;
        }

        pre,
        code {
            font-family: 'JetBrains+Mono', monospace;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            height: 350px;
            max-height: 400px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .code-highlight {
            transition: background-color 0.3s ease;
        }
    </style>
    <!-- Chosen Palette: Warm Corporate Tech (Slate, Indigo, Amber) for a calm, professional learning environment -->
    <!-- Application Structure Plan: Dashboard-style SPA. 
         1. 'Mission Control' (Overview): Compare Kustomize vs Helm context.
         2. 'Anatomy' (Structure): Interactive file tree to understand the package format.
         3. 'Lab' (Templating): Live interactive input-to-YAML generator to demystify templating.
         4. 'Lifecycle' (Workflow): Process flow of commands. 
         This structure moves from "Why" -> "What" -> "How" -> "Operations", mirroring the learning curve of an SRE. -->
    <!-- Visualization & Content Choices: 
         1. Radar Chart: To compare Kustomize vs Helm traits (Goal: Inform/Compare).
         2. Interactive File Tree (DOM manipulation): To teach structure without static images (Goal: Organize).
         3. Dynamic Text Replacement: To simulate templating engine (Goal: Change/Demonstrate).
         4. Step-by-Step Process: For lifecycle commands (Goal: Inform).
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>

<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-slate-800 text-white sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-2">
                    <a href="index.html"
                        class="mr-2 p-2 rounded-full hover:bg-slate-700 text-slate-400 hover:text-white transition-colors"
                        aria-label="Back to Index">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                        </svg>
                    </a>
                    <div class="text-xl font-bold tracking-wider">âš“ Helm é ˜èˆªå“¡</div>
                    <span class="text-xs bg-indigo-500 px-2 py-0.5 rounded-full">SRE Edition</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <button onclick="switchTab('dashboard')"
                            class="nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-slate-700 transition-colors bg-slate-900"
                            id="btn-dashboard">ç¸½è¦½èˆ‡å°æ¯”</button>
                        <button onclick="switchTab('anatomy')"
                            class="nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-slate-700 transition-colors"
                            id="btn-anatomy">Chart çµæ§‹è§£å‰–</button>
                        <button onclick="switchTab('lab')"
                            class="nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-slate-700 transition-colors"
                            id="btn-lab">æ¨¡æ¿å¯¦é©—å®¤</button>
                        <button onclick="switchTab('workflow')"
                            class="nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-slate-700 transition-colors"
                            id="btn-workflow">æ“ä½œç”Ÿå‘½é€±æœŸ</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Mobile menu placeholder -->
        <div class="md:hidden bg-slate-800 border-t border-slate-700 p-2 flex justify-around">
            <button onclick="switchTab('dashboard')" class="text-xs text-slate-300">ç¸½è¦½</button>
            <button onclick="switchTab('anatomy')" class="text-xs text-slate-300">çµæ§‹</button>
            <button onclick="switchTab('lab')" class="text-xs text-slate-300">å¯¦é©—</button>
            <button onclick="switchTab('workflow')" class="text-xs text-slate-300">æ“ä½œ</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow bg-slate-50 p-4 md:p-8 overflow-y-auto">
        <div class="max-w-7xl mx-auto">

            <!-- SECTION: DASHBOARD (Comparison) -->
            <section id="dashboard" class="space-y-6 animate-fade-in">
                <div class="bg-white rounded-lg shadow p-6 border-l-4 border-indigo-500">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">ç‚ºä»€éº¼ SRE éœ€è¦ Helmï¼Ÿ</h2>
                    <p class="text-slate-600 leading-relaxed">
                        æ—¢ç„¶ä½ å·²ç¶“ç†Ÿæ‚‰ <code>Kustomize</code> å’Œ <code>ArgoCD</code>ï¼Œä½ å¯èƒ½ç¿’æ…£äº†ã€ŒOverlayï¼ˆè¦†è“‹ï¼‰ã€çš„æ¨¡å¼ã€‚Kustomize
                        éå¸¸é©åˆé‡å°ä¸åŒç’°å¢ƒé€²è¡Œå¾®å°çš„æ•¸å€¼ä¿®æ”¹ã€‚
                        ç„¶è€Œï¼Œç•¶ä½ éœ€è¦å°‡ä¸€å¥—è¤‡é›œçš„å¾®æœå‹™ï¼ˆåŒ…å« Deployment, Service, Ingress, HPA, ConfigMap
                        ç­‰ï¼‰æ‰“åŒ…ä¸¦åˆ†ç™¼çµ¦å…¶ä»–åœ˜éšŠï¼Œæˆ–è€…éœ€è¦åœ¨ä¸åŒç’°å¢ƒé–“é€²è¡Œå¤§å¹…åº¦çš„é‚è¼¯åˆ‡æ›ï¼ˆä¾‹å¦‚ï¼šDev ç’°å¢ƒä¸é–‹å•Ÿ Ingressï¼ŒProd ç’°å¢ƒé–‹å•Ÿä¸¦é…ç½® TLSï¼‰æ™‚ï¼Œ
                        Kustomize çš„ Patch èªæ³•æœƒè®Šå¾—å†—é•·ä¸”é›£ä»¥ç¶­è­·ã€‚é€™å°±æ˜¯ <strong>Helm (Kubernetes çš„å¥—ä»¶ç®¡ç†å™¨)</strong> é€²å ´çš„æ™‚æ©Ÿã€‚
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Text Context -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-xl font-semibold text-slate-800 mb-4">æ ¸å¿ƒæ¦‚å¿µå°æ¯”</h3>
                        <div class="space-y-4">
                            <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors cursor-pointer"
                                onclick="highlightConcept('templating')">
                                <h4 class="font-bold text-indigo-600">ğŸ“¦ æ‰“åŒ…æ–¹å¼</h4>
                                <p class="text-sm text-slate-600 mt-1">
                                    <span class="font-semibold">Kustomize:</span> åŸºæ–¼ Patch (ä¿®è£œ) èˆ‡ Overlay (ç–ŠåŠ )ã€‚<br>
                                    <span class="font-semibold">Helm:</span> åŸºæ–¼ Templating (æ¨¡æ¿) èˆ‡ Values (è®Šæ•¸)ã€‚
                                </p>
                            </div>
                            <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors cursor-pointer"
                                onclick="highlightConcept('release')">
                                <h4 class="font-bold text-indigo-600">ğŸš€ ç‰ˆæœ¬æ§åˆ¶</h4>
                                <p class="text-sm text-slate-600 mt-1">
                                    <span class="font-semibold">Kustomize:</span> ä¾è³´ Git Commit IDã€‚<br>
                                    <span class="font-semibold">Helm:</span> æœ‰æ˜ç¢ºçš„ Chart Version (SemVer) èˆ‡ Release
                                    Revisionã€‚
                                </p>
                            </div>
                            <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors cursor-pointer"
                                onclick="highlightConcept('logic')">
                                <h4 class="font-bold text-indigo-600">ğŸ§  é‚è¼¯èƒ½åŠ›</h4>
                                <p class="text-sm text-slate-600 mt-1">
                                    <span class="font-semibold">Kustomize:</span> ç´”è²æ˜å¼ï¼Œç„¡é‚è¼¯æ§åˆ¶ã€‚<br>
                                    <span class="font-semibold">Helm:</span> æ”¯æ´ If/Else, Loop, Pipe ç­‰ Go Template èªæ³•ã€‚
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Radar Chart -->
                    <div class="bg-white rounded-lg shadow p-6 flex flex-col items-center justify-center">
                        <h3 class="text-lg font-semibold text-slate-700 mb-2 w-full text-left">å·¥å…·ç‰¹æ€§é›·é”åœ–</h3>
                        <div class="chart-container">
                            <canvas id="comparisonChart"></canvas>
                        </div>
                        <p class="text-xs text-slate-400 mt-2 text-center">Helm åœ¨å¯é‡ç”¨æ€§èˆ‡é‚è¼¯è¤‡é›œåº¦ä¸Šä½”å„ªï¼ŒKustomize åœ¨ç°¡å–®æ€§èˆ‡åŸç”Ÿæ”¯æŒä¸Šä½”å„ªã€‚
                        </p>
                    </div>
                </div>
            </section>

            <!-- SECTION: ANATOMY (Structure) -->
            <section id="anatomy" class="hidden space-y-6">
                <div class="bg-white rounded-lg shadow p-6 border-l-4 border-amber-500">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">Helm Chart çš„è§£å‰–å­¸</h2>
                    <p class="text-slate-600">
                        Helm çš„å¥—ä»¶ç¨±ç‚º "Chart"ã€‚å°æ–¼ç¿’æ…£ Kustomize <code>kustomization.yaml</code> çš„ä½ ä¾†èªªï¼Œé€™è£¡æœ€å¤§çš„ä¸åŒåœ¨æ–¼ï¼š
                        <span class="font-mono bg-slate-100 px-1 rounded">values.yaml</span> æ˜¯è®Šæ•¸çš„ä¾†æºï¼Œè€Œ <span
                            class="font-mono bg-slate-100 px-1 rounded">templates/</span> è³‡æ–™å¤¾æ˜¯å«æœ‰è®Šæ•¸ä½”ä½ç¬¦çš„ K8s YAML æª”æ¡ˆã€‚
                        é»æ“Šä¸‹æ–¹çš„æª”æ¡ˆçµæ§‹ä¾†æŸ¥çœ‹è©³ç´°èªªæ˜ã€‚
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- File Tree Interactive -->
                    <div class="col-span-1 bg-slate-800 text-slate-300 rounded-lg p-6 font-mono text-sm shadow-inner">
                        <div class="mb-4 text-slate-400 text-xs uppercase tracking-widest">Project Structure</div>
                        <ul class="space-y-2 cursor-pointer select-none">
                            <li class="hover:text-white transition-colors" onclick="showFileDetail('chart')">
                                <span class="mr-2">ğŸ“‚</span>my-app/
                            </li>
                            <li class="pl-6 hover:text-white transition-colors" onclick="showFileDetail('chartyaml')">
                                <span class="mr-2">ğŸ“„</span>Chart.yaml
                            </li>
                            <li class="pl-6 hover:text-white transition-colors" onclick="showFileDetail('values')">
                                <span class="mr-2 text-yellow-400">ğŸ“„</span>values.yaml <span
                                    class="text-xs text-slate-500 ml-2">&lt;-- é‡é»</span>
                            </li>
                            <li class="pl-6 hover:text-white transition-colors" onclick="showFileDetail('charts')">
                                <span class="mr-2">ğŸ“‚</span>charts/
                            </li>
                            <li class="pl-6 hover:text-white transition-colors" onclick="showFileDetail('templates')">
                                <span class="mr-2 text-indigo-400">ğŸ“‚</span>templates/
                            </li>
                            <li class="pl-12 hover:text-white transition-colors" onclick="showFileDetail('deployment')">
                                <span class="mr-2">ğŸ“„</span>deployment.yaml
                            </li>
                            <li class="pl-12 hover:text-white transition-colors" onclick="showFileDetail('service')">
                                <span class="mr-2">ğŸ“„</span>service.yaml
                            </li>
                            <li class="pl-12 hover:text-white transition-colors" onclick="showFileDetail('helpers')">
                                <span class="mr-2">ğŸ“„</span>_helpers.tpl
                            </li>
                        </ul>
                    </div>

                    <!-- Detail Panel -->
                    <div class="col-span-1 md:col-span-2 bg-white rounded-lg shadow p-6 flex flex-col justify-center">
                        <div id="file-detail-content" class="transition-all duration-300">
                            <div class="text-center text-slate-400">
                                <div class="text-6xl mb-4">ğŸ‘†</div>
                                <p>é»æ“Šå·¦å´æª”æ¡ˆç›®éŒ„ä»¥æŸ¥çœ‹ SRE éœ€è¦é—œæ³¨çš„é‡é»ç´°ç¯€ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: LAB (Templating) -->
            <section id="lab" class="hidden space-y-6">
                <div class="bg-white rounded-lg shadow p-6 border-l-4 border-green-500">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">æ¨¡æ¿å¯¦é©—å®¤ï¼šGo Template å¯¦æˆ°</h2>
                    <p class="text-slate-600">
                        é€™æ˜¯ Helm æœ€å¼·å¤§ä½†ä¹Ÿæœ€å®¹æ˜“è®“äººå›°æƒ‘çš„åœ°æ–¹ã€‚Helm ä½¿ç”¨ Go template èªæ³•å°‡ <code>values.yaml</code> çš„å…§å®¹æ³¨å…¥åˆ°
                        <code>templates/</code> ä¸­çš„ YAML æª”æ¡ˆã€‚
                        è©¦è‘—åœ¨å·¦å´ä¿®æ”¹è®Šæ•¸ï¼Œè§€å¯Ÿå³å´æœ€çµ‚ç”Ÿæˆçš„ Kubernetes YAML è®ŠåŒ–ã€‚é€™æ¨¡æ“¬äº† <code>helm template</code> æŒ‡ä»¤çš„æ•ˆæœã€‚
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-0 lg:gap-8 border rounded-xl overflow-hidden shadow-lg">
                    <!-- Input (Values.yaml sim) -->
                    <div class="bg-slate-50 p-6 border-b lg:border-b-0 lg:border-r border-slate-200">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-slate-700 font-mono">values.yaml (Input)</h3>
                            <span class="text-xs text-slate-500 bg-slate-200 px-2 py-1 rounded">User
                                Configuration</span>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-1">replicaCount</label>
                                <input type="number" id="input-replica" value="3"
                                    class="w-full px-3 py-2 border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                    oninput="updateTemplate()">
                                <p class="text-xs text-slate-400 mt-1">æ§åˆ¶ Pod çš„å‰¯æœ¬æ•¸é‡</p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-1">image.repository</label>
                                <input type="text" id="input-repo" value="nginx"
                                    class="w-full px-3 py-2 border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                    oninput="updateTemplate()">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-slate-600 mb-1">image.tag</label>
                                <input type="text" id="input-tag" value="1.21.0"
                                    class="w-full px-3 py-2 border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                    oninput="updateTemplate()">
                            </div>

                            <div class="flex items-center gap-2 pt-2">
                                <input type="checkbox" id="input-ingress" class="w-4 h-4 text-indigo-600"
                                    onchange="updateTemplate()">
                                <label for="input-ingress" class="text-sm font-medium text-slate-700">enabledIngress
                                    (Logic Check)</label>
                            </div>
                            <p class="text-xs text-slate-400 ml-6">å‹¾é¸ä»¥æ¨¡æ“¬ <code>{{ if .Values.ingress.enabled }}</code>
                                é‚è¼¯å¡Š</p>
                        </div>
                    </div>

                    <!-- Output (Deployment.yaml sim) -->
                    <div class="bg-slate-900 p-6 text-slate-300 overflow-x-auto">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-green-400 font-mono">Resulting Manifest</h3>
                            <span class="text-xs text-slate-500 border border-slate-600 px-2 py-1 rounded">Rendered
                                Output</span>
                        </div>
                        <pre class="text-sm leading-relaxed"><code id="code-output">
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  replicas: <span id="out-replica" class="text-yellow-400 font-bold">3</span>
  selector:
    matchLabels:
      app: my-app
  template:
    metadata:
      labels:
        app: my-app
    spec:
      containers:
        - name: my-app
          image: "<span id="out-repo" class="text-yellow-400">nginx</span>:<span id="out-tag" class="text-yellow-400">1.21.0</span>"
          ports:
            - containerPort: 80
<div id="out-ingress-block" class="hidden opacity-50 transition-opacity duration-500">
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-app-ingress
spec:
  rules:
    - host: "example.com"
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: my-app
                port:
                  number: 80
</div></code></pre>
                    </div>
                </div>
            </section>

            <!-- SECTION: WORKFLOW (Lifecycle) -->
            <section id="workflow" class="hidden space-y-6">
                <div class="bg-white rounded-lg shadow p-6 border-l-4 border-purple-500">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">Helm çš„æ“ä½œç”Ÿå‘½é€±æœŸ</h2>
                    <p class="text-slate-600">
                        Helm å°‡ä¸€çµ„ YAML è¦–ç‚ºä¸€å€‹ "Release"ã€‚é€™èˆ‡ <code>kubectl apply -k</code> æ¯æ¬¡éƒ½æ˜¯ç„¡ç‹€æ…‹çš„æ‡‰ç”¨ä¸åŒï¼ŒHelm æœƒåœ¨ K8s Cluster å…§
                        (é€é Secret) è¨˜éŒ„ç‰ˆæœ¬çš„æ­·å²ï¼Œé€™è®“ã€Œå›æ»¾ (Rollback)ã€è®Šå¾—æ¥µå…¶ç°¡å–®ã€‚
                        é»æ“Šä¸‹æ–¹æµç¨‹åœ–çš„æ­¥é©Ÿä¾†æŸ¥çœ‹å°æ‡‰æŒ‡ä»¤ã€‚
                    </p>
                </div>

                <!-- Process Flow -->
                <div class="relative py-10">
                    <!-- Connecting Line -->
                    <div
                        class="absolute top-1/2 left-0 w-full h-1 bg-slate-200 -z-10 transform -translate-y-1/2 hidden md:block">
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                        <!-- Step 1 -->
                        <div class="relative group cursor-pointer" onclick="showWorkflowDetail('repo')">
                            <div
                                class="mx-auto w-12 h-12 bg-white border-2 border-indigo-500 rounded-full flex items-center justify-center text-xl shadow-md group-hover:bg-indigo-50 transition-colors z-10">
                                1</div>
                            <div class="text-center mt-2 font-bold text-slate-700">Add Repo</div>
                            <div class="text-center text-xs text-slate-500">å–å¾— Chart ä¾†æº</div>
                        </div>

                        <!-- Step 2 -->
                        <div class="relative group cursor-pointer" onclick="showWorkflowDetail('install')">
                            <div
                                class="mx-auto w-12 h-12 bg-white border-2 border-indigo-500 rounded-full flex items-center justify-center text-xl shadow-md group-hover:bg-indigo-50 transition-colors z-10">
                                2</div>
                            <div class="text-center mt-2 font-bold text-slate-700">Install</div>
                            <div class="text-center text-xs text-slate-500">é¦–æ¬¡éƒ¨ç½²</div>
                        </div>

                        <!-- Step 3 -->
                        <div class="relative group cursor-pointer" onclick="showWorkflowDetail('upgrade')">
                            <div
                                class="mx-auto w-12 h-12 bg-white border-2 border-indigo-500 rounded-full flex items-center justify-center text-xl shadow-md group-hover:bg-indigo-50 transition-colors z-10">
                                3</div>
                            <div class="text-center mt-2 font-bold text-slate-700">Upgrade</div>
                            <div class="text-center text-xs text-slate-500">è®Šæ›´é…ç½®èˆ‡æ›´æ–°</div>
                        </div>

                        <!-- Step 4 -->
                        <div class="relative group cursor-pointer" onclick="showWorkflowDetail('history')">
                            <div
                                class="mx-auto w-12 h-12 bg-white border-2 border-indigo-500 rounded-full flex items-center justify-center text-xl shadow-md group-hover:bg-indigo-50 transition-colors z-10">
                                4</div>
                            <div class="text-center mt-2 font-bold text-slate-700">List/History</div>
                            <div class="text-center text-xs text-slate-500">æŸ¥çœ‹ç‰ˆæœ¬ç´€éŒ„</div>
                        </div>

                        <!-- Step 5 -->
                        <div class="relative group cursor-pointer" onclick="showWorkflowDetail('rollback')">
                            <div
                                class="mx-auto w-12 h-12 bg-white border-2 border-orange-500 rounded-full flex items-center justify-center text-xl shadow-md group-hover:bg-orange-50 transition-colors z-10">
                                5</div>
                            <div class="text-center mt-2 font-bold text-slate-700">Rollback</div>
                            <div class="text-center text-xs text-slate-500">ç·Šæ€¥é‚„åŸ</div>
                        </div>
                    </div>
                </div>

                <!-- Workflow Detail Card -->
                <div class="bg-slate-800 rounded-lg p-6 text-slate-300 shadow-xl mt-6 min-h-[150px]">
                    <div id="workflow-content">
                        <p class="text-center italic text-slate-500">é»æ“Šä¸Šæ–¹æ­¥é©ŸæŸ¥çœ‹å°æ‡‰çš„ SRE æŒ‡ä»¤èˆ‡èªªæ˜...</p>
                    </div>
                </div>

                <!-- ArgoCD Note -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4 flex items-start gap-3">
                    <span class="text-2xl">ğŸ’¡</span>
                    <div>
                        <h4 class="font-bold text-blue-800">é—œæ–¼ ArgoCD</h4>
                        <p class="text-sm text-blue-700">
                            é›–ç„¶é€™è£¡æ˜¯æ‰‹å‹•æŒ‡ä»¤ï¼Œä½†åœ¨ ArgoCD ä¸­ï¼Œä½ åªéœ€è¦åœ¨ Application çš„ Source è¨­å®šä¸­å°‡é¡åˆ¥æ”¹ç‚º <code>Helm</code>ï¼Œä¸¦æŒ‡å®š
                            <code>valueFiles</code> æˆ– <code>parameters</code>ã€‚ArgoCD æœƒåœ¨èƒŒæ™¯åŸ·è¡Œ <code>helm template</code>
                            é‚è¼¯ï¼Œä¸¦å¹«ä½ åš syncã€‚ä½ ä¸å†éœ€è¦æ‰‹å‹•ä¸‹ <code>helm install</code>ï¼Œä½†ç†è§£é€™äº›æŒ‡ä»¤å°æ–¼é™¤éŒ¯ (Debug) è‡³é—œé‡è¦ã€‚
                        </p>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-auto">
        <div class="max-w-7xl mx-auto py-4 px-4 text-center text-sm text-slate-500">
            Helm Learning Module for SREs &copy; 2023. Generated by Canvas Create.
        </div>
    </footer>

    <script>
        // State Management
        const state = {
            currentTab: 'dashboard',
            fileDetails: {
                'chart': { title: 'Project Root', desc: 'Helm Chart çš„æ ¹ç›®éŒ„ï¼Œé€šå¸¸èˆ‡æ‡‰ç”¨ç¨‹å¼åç¨±ç›¸åŒã€‚' },
                'chartyaml': { title: 'Chart.yaml', desc: '<b>ä¸­ç¹¼è³‡æ–™å®šç¾©æª”</b>ã€‚<br>åŒ…å« Chart çš„åç¨±ã€ç‰ˆæœ¬(version)ä»¥åŠæ‡‰ç”¨ç¨‹å¼ç‰ˆæœ¬(appVersion)ã€‚<br>SRE å¿…é ˆæ³¨æ„ `version` æ¬„ä½ï¼Œé€™æ±ºå®šäº† Artifact Hub ä¸Šçš„ç‰ˆè™Ÿã€‚' },
                'values': { title: 'values.yaml', desc: '<b>é è¨­è®Šæ•¸æª”</b>ã€‚<br>é€™æ˜¯æœ€å¸¸ä¿®æ”¹çš„æª”æ¡ˆã€‚å®šç¾©äº†æ¨¡æ¿ä¸­æ‰€æœ‰è®Šæ•¸çš„é è¨­å€¼ï¼ˆä¾‹å¦‚ replicaCount: 1ï¼‰ã€‚<br>åœ¨ ArgoCD ä¸­ï¼Œæˆ‘å€‘é€šå¸¸æœƒå¦å¤–å»ºç«‹ `values-prod.yaml` ä¾†è¦†è“‹é€™è£¡çš„è¨­å®šã€‚' },
                'charts': { title: 'charts/', desc: '<b>ä¾è³´ç®¡ç† (Subcharts)</b>ã€‚<br>å¦‚æœä½ çš„æ‡‰ç”¨ç¨‹å¼ä¾è³´å…¶ä»– Chart (ä¾‹å¦‚ Redis, Postgres)ï¼Œé€™äº›ä¾è³´åŒ…æœƒè¢«ä¸‹è¼‰åˆ°é€™è£¡ã€‚é¡ä¼¼ npm_modulesã€‚' },
                'templates': { title: 'templates/', desc: '<b>Kubernetes Manifest æ¨¡æ¿</b>ã€‚<br>é€™è£¡å­˜æ”¾äº†æ··åˆ Go Template èªæ³•çš„ .yaml æª”æ¡ˆã€‚Helm æœƒè®€å– values.yaml çš„å€¼ï¼Œå¡«å…¥é€™äº›æ¨¡æ¿ï¼Œæœ€å¾Œç”¢å‡ºç´” YAML çµ¦ K8sã€‚' },
                'deployment': { title: 'templates/deployment.yaml', desc: '<b>ä¸»ç¨‹å¼éƒ¨ç½²æª”</b>ã€‚<br>ä½ æœƒçœ‹åˆ°å¤§é‡ `{{ .Values.image.repository }}` èªæ³•ã€‚é€™æ˜¯å®šç¾© Pod å¦‚ä½•é‹è¡Œçš„æ ¸å¿ƒã€‚' },
                'service': { title: 'templates/service.yaml', desc: '<b>æœå‹™å®šç¾©æª”</b>ã€‚<br>å®šç¾© ClusterIP æˆ– LoadBalancerï¼Œè®“æµé‡èƒ½é€²å…¥ Podã€‚' },
                'helpers': { title: 'templates/_helpers.tpl', desc: '<b>è¼”åŠ©å‡½æ•¸</b>ã€‚<br>å®šç¾©å¯é‡è¤‡ä½¿ç”¨çš„æ¨¡æ¿ç‰‡æ®µ (Partials)ï¼Œä¾‹å¦‚æ¨™æº–çš„ Labels ç”Ÿæˆé‚è¼¯ã€‚ä»¥ `_` é–‹é ­çš„æª”æ¡ˆä¸æœƒè¢«æ¸²æŸ“æˆ K8s ç‰©ä»¶ã€‚' }
            },
            workflowDetails: {
                'repo': { title: 'helm repo add', cmd: 'helm repo add [NAME] [URL]<br>helm repo update', desc: 'é¡ä¼¼ `apt-get update`ã€‚åœ¨ä½¿ç”¨åˆ¥äººçš„ Chart (å¦‚ Bitnami) å‰ï¼Œéœ€å…ˆåŠ å…¥ä»–å€‘çš„å€‰åº«ä¾†æºã€‚' },
                'install': { title: 'helm install', cmd: 'helm install [RELEASE_NAME] [CHART_PATH] -f values.yaml', desc: 'é¦–æ¬¡éƒ¨ç½²ã€‚é€™æœƒåœ¨ K8s ä¸­å»ºç«‹ä¸€å€‹ Release ç‰©ä»¶ã€‚æ³¨æ„ï¼šRelease Name åœ¨è©² Namespace ä¸­å¿…é ˆå”¯ä¸€ã€‚' },
                'upgrade': { title: 'helm upgrade', cmd: 'helm upgrade [RELEASE_NAME] [CHART_PATH] -f new-values.yaml', desc: 'æ›´æ–°ç¾æœ‰çš„ Releaseã€‚Helm æœƒè¨ˆç®—å·®ç•° (Diff) ä¸¦åªæ›´æ–°è®Šæ›´çš„éƒ¨åˆ†ã€‚' },
                'history': { title: 'helm history', cmd: 'helm history [RELEASE_NAME]', desc: 'åˆ—å‡ºè©² Release çš„æ‰€æœ‰ç‰ˆæœ¬ç´€éŒ„ã€‚ä½ å¯ä»¥çœ‹åˆ° Revision 1, 2, 3... ä»¥åŠéƒ¨ç½²ç‹€æ…‹ (deployed, failed)ã€‚' },
                'rollback': { title: 'helm rollback', cmd: 'helm rollback [RELEASE_NAME] [REVISION_NO]', desc: 'æ•‘å‘½æŒ‡ä»¤ã€‚ç•¶æ–°ç‰ˆæœ¬ç‚¸æ‰æ™‚ï¼Œç›´æ¥å›åˆ°ä¸Šä¸€å€‹ç©©å®šç‰ˆæœ¬ (Revision)ã€‚é€™æ˜¯ Kustomize è¼ƒé›£ç›´æ¥åšåˆ°çš„ã€‚' }
            }
        };

        // Initialization
        document.addEventListener('DOMContentLoaded', () => {
            renderComparisonChart();
            switchTab('dashboard');
        });

        // Navigation Logic
        function switchTab(tabId) {
            // Hide all sections
            ['dashboard', 'anatomy', 'lab', 'workflow'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
                document.getElementById(`btn-${id}`).classList.remove('bg-slate-900', 'text-white');
                document.getElementById(`btn-${id}`).classList.add('text-slate-300', 'hover:text-white'); // Reset logic for clarity
                // Re-apply base nav styles for inactive
                const btn = document.getElementById(`btn-${id}`);
                btn.className = "nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-slate-700 transition-colors text-slate-300";
            });

            // Show active section
            document.getElementById(tabId).classList.remove('hidden');
            const activeBtn = document.getElementById(`btn-${tabId}`);
            activeBtn.className = "nav-btn px-3 py-2 rounded-md text-sm font-medium hover:bg-slate-700 transition-colors bg-slate-900 text-white";
        }

        // Dashboard Chart
        function renderComparisonChart() {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['å­¸ç¿’æ›²ç·š', 'é‚è¼¯éˆæ´»æ€§', 'å¤šç’°å¢ƒç®¡ç†', 'æ‰“åŒ…é‡ç”¨æ€§', 'GitOps åŸç”Ÿæ€§', 'é™¤éŒ¯é›£åº¦'],
                    datasets: [{
                        label: 'Kustomize',
                        data: [9, 3, 7, 4, 9, 8], // Kustomize: Easy to learn, low logic, good gitops, easy debug
                        fill: true,
                        backgroundColor: 'rgba(245, 158, 11, 0.2)', // Amber
                        borderColor: 'rgb(245, 158, 11)',
                        pointBackgroundColor: 'rgb(245, 158, 11)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(245, 158, 11)'
                    }, {
                        label: 'Helm',
                        data: [5, 9, 8, 10, 7, 5], // Helm: Harder learn, high logic, high reuse, harder debug
                        fill: true,
                        backgroundColor: 'rgba(99, 102, 241, 0.2)', // Indigo
                        borderColor: 'rgb(99, 102, 241)',
                        pointBackgroundColor: 'rgb(99, 102, 241)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(99, 102, 241)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 10,
                            grid: { color: '#e2e8f0' },
                            pointLabels: {
                                font: { size: 12, family: "'Noto Sans TC', sans-serif" }
                            }
                        }
                    },
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    return context.dataset.label + ': ' + context.raw + '/10';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Anatomy Interaction
        function showFileDetail(fileKey) {
            const contentDiv = document.getElementById('file-detail-content');
            const data = state.fileDetails[fileKey];

            contentDiv.innerHTML = `
                <div class="animate-fade-in">
                    <h3 class="text-xl font-bold text-slate-800 border-b pb-2 mb-3">${data.title}</h3>
                    <p class="text-slate-600 leading-relaxed">${data.desc}</p>
                </div>
            `;
        }

        // Lab Interaction (Templating)
        function updateTemplate() {
            const replica = document.getElementById('input-replica').value;
            const repo = document.getElementById('input-repo').value;
            const tag = document.getElementById('input-tag').value;
            const ingressEnabled = document.getElementById('input-ingress').checked;

            // Update DOM elements mimicking code
            document.getElementById('out-replica').innerText = replica;
            document.getElementById('out-repo').innerText = repo;
            document.getElementById('out-tag').innerText = tag;

            const ingressBlock = document.getElementById('out-ingress-block');
            if (ingressEnabled) {
                ingressBlock.classList.remove('hidden');
                setTimeout(() => ingressBlock.classList.remove('opacity-50'), 50);
            } else {
                ingressBlock.classList.add('opacity-50');
                setTimeout(() => ingressBlock.classList.add('hidden'), 300);
            }
        }

        // Workflow Interaction
        function showWorkflowDetail(stepKey) {
            const contentDiv = document.getElementById('workflow-content');
            const data = state.workflowDetails[stepKey];

            contentDiv.innerHTML = `
                <div class="animate-fade-in">
                    <div class="flex items-center gap-3 mb-2">
                        <h3 class="text-xl font-bold text-white">${data.title}</h3>
                    </div>
                    <div class="bg-black/30 p-3 rounded font-mono text-green-400 text-sm mb-3 border-l-4 border-green-500">
                        ${data.cmd}
                    </div>
                    <p class="text-slate-300 leading-relaxed">${data.desc}</p>
                </div>
            `;
        }

        // CSS Animation Helper
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(5px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in {
                animation: fadeIn 0.3s ease-out forwards;
            }
        `;
        document.head.appendChild(styleSheet);

    </script>
</body>

</html>