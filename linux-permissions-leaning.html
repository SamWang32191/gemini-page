<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux æ¬Šé™æŒ‡ä»¤äº’å‹•æŒ‡å—ï¼šchmod èˆ‡ chown æ·±åº¦è§£æ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }

        /* Chart Container Styles - Responsive & Constrained */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Toggles */
        .perm-toggle {
            transition: all 0.2s ease;
        }

        .perm-toggle:checked+div {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        /* Code block styling */
        .code-snippet {
            font-family: 'Courier New', Courier, monospace;
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 0.5rem;
            border-radius: 0.375rem;
        }

        .active-tab {
            border-bottom: 2px solid #3b82f6;
            color: #1d4ed8;
            font-weight: 600;
        }

        .inactive-tab {
            color: #64748b;
        }

        .inactive-tab:hover {
            color: #334155;
        }
    </style>
    <!-- Chosen Palette: Slate (Neutrals) + Blue (Primary Action) + Emerald (Success) + Amber (Warning) -->
    <!-- Application Structure Plan: 
         1. Header: Clear title and purpose.
         2. Interactive Simulator (Hero Section): The core "Wow" factor. Users can toggle bits (r/w/x) for U/G/O and see the numeric code (755) and symbolic string (-rwxr-xr-x) update in real-time. Includes a visual chart showing "Access Level".
         3. The Logic (4-2-1): Detailed breakdown of the octal system using an interactive table where users can filter combinations.
         4. Command Deep Dive: Tabbed interface for 'chmod' vs 'chown', explaining syntax with dynamic examples based on the simulator's state.
         5. Common Scenarios: A "Best Practice" section showing standard permissions for web servers, private keys, etc.
         Rationale: Permission concepts are abstract. Starting with a visual simulator grounds the user before diving into the theory.
    -->
    <!-- Visualization & Content Choices:
         1. Simulator Radar/Bar Chart: Goal -> Visualize the "shape" of security. Method -> Chart.js Bar Chart. Justification -> Shows relative power of User vs Group vs Others immediately.
         2. Bitwise Toggles: Goal -> Teach the 4+2+1 math. Method -> HTML/JS Checkboxes. Justification -> Direct manipulation learning.
         3. Dynamic Command Builder: Goal -> Syntax mastery. Method -> JS Text Updates. Justification -> Users copy-paste specific commands; seeing them build dynamically aids memory.
         4. NO SVG/Mermaid confirmed. Using standard HTML/CSS and Chart.js.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>

<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-slate-800">ğŸ§ Linux æ¬Šé™å¤§å¸«</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="navTo('simulator')"
                        class="nav-btn active-tab px-3 py-2 text-sm font-medium transition-colors"
                        id="nav-simulator">äº’å‹•æ¨¡æ“¬å™¨</button>
                    <button onclick="navTo('logic')"
                        class="nav-btn inactive-tab px-3 py-2 text-sm font-medium transition-colors"
                        id="nav-logic">4-2-1 åŸç†</button>
                    <button onclick="navTo('commands')"
                        class="nav-btn inactive-tab px-3 py-2 text-sm font-medium transition-colors"
                        id="nav-commands">æŒ‡ä»¤è©³è§£</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full space-y-12">

        <!-- INTRO -->
        <section class="text-center max-w-3xl mx-auto">
            <h1 class="text-4xl font-extrabold text-slate-900 mb-4 tracking-tight">æŒæ¡ chmod èˆ‡ chown</h1>
            <p class="text-lg text-slate-600">
                Linux æª”æ¡ˆç³»çµ±çš„å®‰å…¨æ ¸å¿ƒåœ¨æ–¼æ¬Šé™æ§åˆ¶ã€‚é€éæœ¬äº’å‹•æŒ‡å—ï¼Œæ‚¨å°‡æ·±å…¥ç†è§£
                <span class="font-mono bg-slate-200 px-1 rounded text-sm">rwx</span> (4-2-1) æ•¸å€¼çµ„åˆã€
                <span class="font-mono bg-slate-200 px-1 rounded text-sm">chmod</span> æˆæ¬Šé‚è¼¯ï¼Œä»¥åŠ
                <span class="font-mono bg-slate-200 px-1 rounded text-sm">chown</span> æ“æœ‰æ¬Šç®¡ç†ã€‚
            </p>
        </section>

        <!-- SECTION 1: INTERACTIVE SIMULATOR -->
        <section id="simulator" class="scroll-mt-24">
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-100">
                <div class="p-6 border-b border-slate-100 bg-slate-50">
                    <h2 class="text-2xl font-bold text-slate-800 flex items-center gap-2">
                        ğŸ›ï¸ æ¬Šé™æ¨¡æ“¬å™¨ (Permission Calculator)
                    </h2>
                    <p class="text-slate-600 mt-2">
                        é»æ“Šä¸‹æ–¹çš„æŒ‰éˆ•ä¾†åˆ‡æ›è®€ (Read)ã€å¯« (Write)ã€åŸ·è¡Œ (Execute) æ¬Šé™ã€‚è§€å¯Ÿæ•¸å€¼èˆ‡æŒ‡ä»¤å¦‚ä½•å³æ™‚è®ŠåŒ–ã€‚
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 p-8">
                    <!-- Controls -->
                    <div class="space-y-8">
                        <!-- User (Owner) -->
                        <div class="bg-blue-50 rounded-xl p-5 border border-blue-100">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-bold text-blue-800 text-lg">æ“æœ‰è€… (User/Owner)</h3>
                                <span id="val-u" class="text-2xl font-mono font-bold text-blue-600">7</span>
                            </div>
                            <div class="grid grid-cols-3 gap-3">
                                <label class="cursor-pointer group">
                                    <input type="checkbox" class="perm-toggle hidden" data-target="u" data-val="4"
                                        checked onchange="updateState()">
                                    <div
                                        class="text-center py-3 border-2 border-blue-200 rounded-lg text-blue-900 font-medium group-hover:border-blue-400">
                                        <div>Read</div>
                                        <div class="text-xs opacity-75">4</div>
                                    </div>
                                </label>
                                <label class="cursor-pointer group">
                                    <input type="checkbox" class="perm-toggle hidden" data-target="u" data-val="2"
                                        checked onchange="updateState()">
                                    <div
                                        class="text-center py-3 border-2 border-blue-200 rounded-lg text-blue-900 font-medium group-hover:border-blue-400">
                                        <div>Write</div>
                                        <div class="text-xs opacity-75">2</div>
                                    </div>
                                </label>
                                <label class="cursor-pointer group">
                                    <input type="checkbox" class="perm-toggle hidden" data-target="u" data-val="1"
                                        checked onchange="updateState()">
                                    <div
                                        class="text-center py-3 border-2 border-blue-200 rounded-lg text-blue-900 font-medium group-hover:border-blue-400">
                                        <div>Execute</div>
                                        <div class="text-xs opacity-75">1</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Group -->
                        <div class="bg-emerald-50 rounded-xl p-5 border border-emerald-100">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-bold text-emerald-800 text-lg">ç¾¤çµ„ (Group)</h3>
                                <span id="val-g" class="text-2xl font-mono font-bold text-emerald-600">5</span>
                            </div>
                            <div class="grid grid-cols-3 gap-3">
                                <label class="cursor-pointer group">
                                    <input type="checkbox" class="perm-toggle hidden" data-target="g" data-val="4"
                                        checked onchange="updateState()">
                                    <div
                                        class="text-center py-3 border-2 border-emerald-200 rounded-lg text-emerald-900 font-medium group-hover:border-emerald-400">
                                        <div>Read</div>
                                        <div class="text-xs opacity-75">4</div>
                                    </div>
                                </label>
                                <label class="cursor-pointer group">
                                    <input type="checkbox" class="perm-toggle hidden" data-target="g" data-val="2"
                                        onchange="updateState()">
                                    <div
                                        class="text-center py-3 border-2 border-emerald-200 rounded-lg text-emerald-900 font-medium group-hover:border-emerald-400">
                                        <div>Write</div>
                                        <div class="text-xs opacity-75">2</div>
                                    </div>
                                </label>
                                <label class="cursor-pointer group">
                                    <input type="checkbox" class="perm-toggle hidden" data-target="g" data-val="1"
                                        checked onchange="updateState()">
                                    <div
                                        class="text-center py-3 border-2 border-emerald-200 rounded-lg text-emerald-900 font-medium group-hover:border-emerald-400">
                                        <div>Execute</div>
                                        <div class="text-xs opacity-75">1</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Others -->
                        <div class="bg-amber-50 rounded-xl p-5 border border-amber-100">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-bold text-amber-800 text-lg">å…¶ä»–äºº (Others)</h3>
                                <span id="val-o" class="text-2xl font-mono font-bold text-amber-600">5</span>
                            </div>
                            <div class="grid grid-cols-3 gap-3">
                                <label class="cursor-pointer group">
                                    <input type="checkbox" class="perm-toggle hidden" data-target="o" data-val="4"
                                        checked onchange="updateState()">
                                    <div
                                        class="text-center py-3 border-2 border-amber-200 rounded-lg text-amber-900 font-medium group-hover:border-amber-400">
                                        <div>Read</div>
                                        <div class="text-xs opacity-75">4</div>
                                    </div>
                                </label>
                                <label class="cursor-pointer group">
                                    <input type="checkbox" class="perm-toggle hidden" data-target="o" data-val="2"
                                        onchange="updateState()">
                                    <div
                                        class="text-center py-3 border-2 border-amber-200 rounded-lg text-amber-900 font-medium group-hover:border-amber-400">
                                        <div>Write</div>
                                        <div class="text-xs opacity-75">2</div>
                                    </div>
                                </label>
                                <label class="cursor-pointer group">
                                    <input type="checkbox" class="perm-toggle hidden" data-target="o" data-val="1"
                                        checked onchange="updateState()">
                                    <div
                                        class="text-center py-3 border-2 border-amber-200 rounded-lg text-amber-900 font-medium group-hover:border-amber-400">
                                        <div>Execute</div>
                                        <div class="text-xs opacity-75">1</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Output & Visualization -->
                    <div class="flex flex-col space-y-6">
                        <!-- Result Card -->
                        <div class="bg-slate-900 text-white rounded-xl p-6 shadow-lg">
                            <div class="text-sm text-slate-400 mb-2 uppercase tracking-wider font-bold">Generated
                                Command</div>
                            <div class="text-3xl font-mono text-green-400 mb-4 break-all">
                                chmod <span id="res-numeric">755</span> filename
                            </div>
                            <div class="border-t border-slate-700 pt-4 flex justify-between items-center">
                                <div>
                                    <div class="text-xs text-slate-400">Symbolic Mode</div>
                                    <div class="font-mono text-lg tracking-widest text-yellow-300" id="res-symbolic">
                                        -rwxr-xr-x</div>
                                </div>
                                <button onclick="copyCommand()"
                                    class="bg-slate-700 hover:bg-slate-600 text-white text-xs px-3 py-1 rounded transition-colors">
                                    è¤‡è£½
                                </button>
                            </div>
                        </div>

                        <!-- Chart Container -->
                        <div
                            class="bg-white rounded-xl border border-slate-200 p-4 shadow-sm flex-grow flex flex-col justify-center">
                            <h4 class="text-sm font-bold text-slate-500 mb-2 text-center uppercase">æ¬Šé™å¼·åº¦åˆ†æ (Access
                                Level)</h4>
                            <div class="chart-container">
                                <canvas id="permChart"></canvas>
                            </div>
                            <p class="text-xs text-slate-400 text-center mt-2">
                                é«˜åº¦ä»£è¡¨è©²èº«ä»½å°æª”æ¡ˆçš„æ§åˆ¶èƒ½åŠ› (0-7)
                            </p>
                        </div>

                        <!-- Human Readable Summary -->
                        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r">
                            <p id="human-summary" class="text-sm text-blue-900">
                                <strong>è§£è®€ï¼š</strong> æ“æœ‰è€…å¯ä»¥å®Œå…¨æ§åˆ¶ï¼Œç¾¤çµ„å¯ä»¥è®€å–å’ŒåŸ·è¡Œï¼Œå…¶ä»–äººå¯ä»¥è®€å–å’ŒåŸ·è¡Œã€‚é€™é€šå¸¸ç”¨æ–¼ç¶²é ä¼ºæœå™¨ä¸Šçš„è³‡æ–™å¤¾ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: THE 4-2-1 LOGIC -->
        <section id="logic" class="scroll-mt-24">
            <div class="mb-6">
                <h2 class="text-3xl font-bold text-slate-800 mb-3">ğŸ”¢ 4-2-1 æ•¸å€¼çµ„åˆåŸç†</h2>
                <p class="text-lg text-slate-600">
                    Linux æ¬Šé™ä½¿ç”¨äºŒé€²ä½æ¨™èªŒï¼ˆBinary Flagsï¼‰ä¾†è¨ˆç®—ã€‚æ¯å€‹æ¬Šé™éƒ½æœ‰ä¸€å€‹ç‰¹å®šçš„æ•¸å€¼ï¼Œå°‡å®ƒå€‘ç›¸åŠ å³å¾—åˆ°æœ€çµ‚æ¬Šé™ã€‚
                    è«‹æŸ¥çœ‹ä¸‹è¡¨äº†è§£æ¯ä¸€å€‹æ•¸å­—ä»£è¡¨çš„å…·é«”å«ç¾©ã€‚
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Explanation -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h3 class="text-xl font-bold mb-4 border-b pb-2">åŸºç¤æ•¸å€¼</h3>
                    <ul class="space-y-4">
                        <li class="flex items-center">
                            <span
                                class="w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center font-bold text-xl mr-4">4</span>
                            <div>
                                <span class="block font-bold text-slate-800">Read (r) - è®€å–</span>
                                <span class="text-sm text-slate-500">è®€å–æª”æ¡ˆå…§å®¹æˆ–æŸ¥çœ‹ç›®éŒ„åˆ—è¡¨ã€‚</span>
                            </div>
                        </li>
                        <li class="flex items-center">
                            <span
                                class="w-12 h-12 rounded-full bg-green-100 text-green-600 flex items-center justify-center font-bold text-xl mr-4">2</span>
                            <div>
                                <span class="block font-bold text-slate-800">Write (w) - å¯«å…¥</span>
                                <span class="text-sm text-slate-500">ä¿®æ”¹æª”æ¡ˆå…§å®¹æˆ–æ˜¯æ–¼ç›®éŒ„ä¸­å»ºç«‹/åˆªé™¤æª”æ¡ˆã€‚</span>
                            </div>
                        </li>
                        <li class="flex items-center">
                            <span
                                class="w-12 h-12 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center font-bold text-xl mr-4">1</span>
                            <div>
                                <span class="block font-bold text-slate-800">Execute (x) - åŸ·è¡Œ</span>
                                <span class="text-sm text-slate-500">å°‡æª”æ¡ˆä½œç‚ºç¨‹å¼åŸ·è¡Œæˆ–é€²å…¥ç›®éŒ„(cd)ã€‚</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Reference Table -->
                <div class="overflow-hidden rounded-xl shadow-sm border border-slate-200">
                    <table class="min-w-full bg-white text-sm">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="py-3 px-4 text-left font-bold text-slate-700">æ•¸å€¼</th>
                                <th class="py-3 px-4 text-left font-bold text-slate-700">ç¬¦è™Ÿ</th>
                                <th class="py-3 px-4 text-left font-bold text-slate-700">æ¬Šé™èªªæ˜</th>
                                <th class="py-3 px-4 text-left font-bold text-slate-700">å¸¸è¦‹ç”¨é€”</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <tr class="hover:bg-slate-50 transition-colors cursor-default">
                                <td class="py-3 px-4 font-mono font-bold text-blue-600">0</td>
                                <td class="py-3 px-4 font-mono text-slate-500">---</td>
                                <td class="py-3 px-4">ç„¡æ¬Šé™</td>
                                <td class="py-3 px-4 text-slate-500">å®Œå…¨å°é–</td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition-colors cursor-default">
                                <td class="py-3 px-4 font-mono font-bold text-blue-600">1</td>
                                <td class="py-3 px-4 font-mono text-slate-500">--x</td>
                                <td class="py-3 px-4">åƒ…åŸ·è¡Œ</td>
                                <td class="py-3 px-4 text-slate-500">é€²å…¥ç›®éŒ„ä½†ä¸åˆ—è¡¨</td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition-colors cursor-default">
                                <td class="py-3 px-4 font-mono font-bold text-blue-600">2</td>
                                <td class="py-3 px-4 font-mono text-slate-500">-w-</td>
                                <td class="py-3 px-4">åƒ…å¯«å…¥</td>
                                <td class="py-3 px-4 text-slate-500">ç½•è¦‹ (åªèƒ½å¯«ä¸èƒ½è®€)</td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition-colors cursor-default">
                                <td class="py-3 px-4 font-mono font-bold text-blue-600">3</td>
                                <td class="py-3 px-4 font-mono text-slate-500">-wx</td>
                                <td class="py-3 px-4">å¯«å…¥ + åŸ·è¡Œ</td>
                                <td class="py-3 px-4 text-slate-500">ç‰¹æ®Šç›®éŒ„æ¬Šé™</td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition-colors cursor-default">
                                <td class="py-3 px-4 font-mono font-bold text-blue-600">4</td>
                                <td class="py-3 px-4 font-mono text-slate-500">r--</td>
                                <td class="py-3 px-4">åƒ…è®€å–</td>
                                <td class="py-3 px-4 text-slate-500">å”¯è®€æª”æ¡ˆ/è¨­å®šæª”</td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition-colors cursor-default">
                                <td class="py-3 px-4 font-mono font-bold text-blue-600">5</td>
                                <td class="py-3 px-4 font-mono text-slate-500">r-x</td>
                                <td class="py-3 px-4">è®€å– + åŸ·è¡Œ</td>
                                <td class="py-3 px-4 text-slate-500">å…¬é–‹çš„åŸ·è¡Œæª”/ç›®éŒ„</td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition-colors cursor-default">
                                <td class="py-3 px-4 font-mono font-bold text-blue-600">6</td>
                                <td class="py-3 px-4 font-mono text-slate-500">rw-</td>
                                <td class="py-3 px-4">è®€å– + å¯«å…¥</td>
                                <td class="py-3 px-4 text-slate-500">ä¸€èˆ¬æ–‡å­—æª”æ¡ˆ</td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition-colors cursor-default bg-yellow-50">
                                <td class="py-3 px-4 font-mono font-bold text-blue-600">7</td>
                                <td class="py-3 px-4 font-mono text-slate-500">rwx</td>
                                <td class="py-3 px-4 font-bold">å®Œå…¨æ§åˆ¶</td>
                                <td class="py-3 px-4 text-slate-500">è…³æœ¬ã€ç¨‹å¼æ“æœ‰è€…</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- SECTION 3: COMMAND DEEP DIVE (CHMOD & CHOWN) -->
        <section id="commands" class="scroll-mt-24">
            <h2 class="text-3xl font-bold text-slate-800 mb-6">ğŸ› ï¸ æŒ‡ä»¤æ·±åº¦è§£æ</h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

                <!-- CHMOD Card -->
                <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col">
                    <div class="bg-slate-800 p-4 text-white flex justify-between items-center">
                        <h3 class="text-xl font-mono font-bold">chmod</h3>
                        <span class="text-xs bg-slate-600 px-2 py-1 rounded">Change Mode</span>
                    </div>
                    <div class="p-6 flex-grow">
                        <p class="text-slate-600 mb-4">
                            ç”¨æ–¼æ”¹è®Šæª”æ¡ˆæˆ–ç›®éŒ„çš„å­˜å–æ¬Šé™ã€‚å¯ä»¥ä½¿ç”¨ã€Œæ•¸å­—æ³•ã€æˆ–ã€Œç¬¦è™Ÿæ³•ã€ã€‚
                        </p>

                        <div class="space-y-4">
                            <div>
                                <h4 class="font-bold text-slate-800 text-sm mb-1">åŸºæœ¬èªæ³•</h4>
                                <div class="code-snippet">chmod [options] mode file...</div>
                            </div>

                            <div>
                                <h4 class="font-bold text-slate-800 text-sm mb-1">å¸¸è¦‹ç¯„ä¾‹ (é»æ“Šè¤‡è£½)</h4>
                                <ul class="space-y-2 text-sm">
                                    <li class="cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200 transition-all"
                                        onclick="copyText('chmod 755 index.html')">
                                        <div class="font-mono text-blue-600 font-bold">chmod 755 index.html</div>
                                        <div class="text-slate-500">æ¨™æº–ç¶²é æ¬Šé™ (Userå…¨é–‹, å…¶å®ƒå”¯è®€/åŸ·è¡Œ)</div>
                                    </li>
                                    <li class="cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200 transition-all"
                                        onclick="copyText('chmod 600 config.yaml')">
                                        <div class="font-mono text-blue-600 font-bold">chmod 600 config.yaml</div>
                                        <div class="text-slate-500">é«˜éš±ç§æª”æ¡ˆ (åƒ…æ“æœ‰è€…å¯è®€å¯«)</div>
                                    </li>
                                    <li class="cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200 transition-all"
                                        onclick="copyText('chmod +x script.sh')">
                                        <div class="font-mono text-blue-600 font-bold">chmod +x script.sh</div>
                                        <div class="text-slate-500">ç¬¦è™Ÿæ³•ï¼šå¿«é€Ÿå¢åŠ åŸ·è¡Œæ¬Šé™</div>
                                    </li>
                                    <li class="cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200 transition-all"
                                        onclick="copyText('chmod -R 755 /var/www')">
                                        <div class="font-mono text-blue-600 font-bold">chmod -R 755 /folder</div>
                                        <div class="text-slate-500"><span
                                                class="bg-yellow-100 text-yellow-800 px-1 rounded">-R</span>
                                            éè¿´ä¿®æ”¹è³‡æ–™å¤¾å…§æ‰€æœ‰å…§å®¹</div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CHOWN Card -->
                <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col">
                    <div class="bg-slate-800 p-4 text-white flex justify-between items-center">
                        <h3 class="text-xl font-mono font-bold">chown</h3>
                        <span class="text-xs bg-slate-600 px-2 py-1 rounded">Change Owner</span>
                    </div>
                    <div class="p-6 flex-grow">
                        <p class="text-slate-600 mb-4">
                            ç”¨æ–¼æ”¹è®Šæª”æ¡ˆæˆ–ç›®éŒ„çš„ã€Œæ“æœ‰è€…ã€èˆ‡ã€Œæ‰€å±¬ç¾¤çµ„ã€ã€‚é€šå¸¸éœ€è¦ <span class="font-mono bg-slate-100 px-1">sudo</span> æ¬Šé™ã€‚
                        </p>

                        <div class="space-y-4">
                            <div>
                                <h4 class="font-bold text-slate-800 text-sm mb-1">åŸºæœ¬èªæ³•</h4>
                                <div class="code-snippet">chown [options] user[:group] file...</div>
                            </div>

                            <div>
                                <h4 class="font-bold text-slate-800 text-sm mb-1">å¸¸è¦‹ç¯„ä¾‹ (é»æ“Šè¤‡è£½)</h4>
                                <ul class="space-y-2 text-sm">
                                    <li class="cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200 transition-all"
                                        onclick="copyText('chown john file.txt')">
                                        <div class="font-mono text-emerald-600 font-bold">chown john file.txt</div>
                                        <div class="text-slate-500">åƒ…æ›´æ”¹æ“æœ‰è€…ç‚º john</div>
                                    </li>
                                    <li class="cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200 transition-all"
                                        onclick="copyText('chown john:devs file.txt')">
                                        <div class="font-mono text-emerald-600 font-bold">chown john:devs file.txt</div>
                                        <div class="text-slate-500">åŒæ™‚æ›´æ”¹æ“æœ‰è€…(john)èˆ‡ç¾¤çµ„(devs)</div>
                                    </li>
                                    <li class="cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200 transition-all"
                                        onclick="copyText('chown :admins file.txt')">
                                        <div class="font-mono text-emerald-600 font-bold">chown :admins file.txt</div>
                                        <div class="text-slate-500">åƒ…æ›´æ”¹ç¾¤çµ„ç‚º admins</div>
                                    </li>
                                    <li class="cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200 transition-all"
                                        onclick="copyText('chown -R www-data:www-data /var/www/html')">
                                        <div class="font-mono text-emerald-600 font-bold">chown -R user:group folder
                                        </div>
                                        <div class="text-slate-500"><span
                                                class="bg-yellow-100 text-yellow-800 px-1 rounded">-R</span> éè¿´æ›´æ”¹æ‰€æœ‰å­é …ç›®
                                            (å¸¸è¦‹æ–¼ç¶²ç«™ä½ˆç½²)</div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- SECTION 4: INTERACTIVE QUIZ/SCENARIO -->
        <section class="bg-slate-800 rounded-2xl p-8 text-center text-white mb-12">
            <h2 class="text-2xl font-bold mb-4">ğŸ’¡ å¯¦æˆ°æ¸¬è©¦</h2>
            <p class="mb-6 text-slate-300">è«‹å˜—è©¦åœ¨ä¸Šæ–¹æ¨¡æ“¬å™¨ä¸­è¨­å®šå‡ºä»¥ä¸‹æƒ…å¢ƒçš„æ¬Šé™ï¼š</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-left">
                <div class="bg-slate-700 p-4 rounded hover:bg-slate-600 transition cursor-pointer"
                    onclick="setScenario(7,0,0)">
                    <h4 class="font-bold text-yellow-400 mb-2">SSH ç§é‘° (id_rsa)</h4>
                    <p class="text-xs text-slate-300">åªæœ‰æ“æœ‰è€…å¯ä»¥è®€å¯«ï¼Œå…¶ä»–äººå®Œå…¨ç¦æ­¢ã€‚</p>
                    <div class="mt-2 text-right text-xs text-slate-400 font-mono">é»æ“Šè¨­å®š -> 700</div>
                </div>
                <div class="bg-slate-700 p-4 rounded hover:bg-slate-600 transition cursor-pointer"
                    onclick="setScenario(7,5,5)">
                    <h4 class="font-bold text-green-400 mb-2">ç¶²ç«™ç›®éŒ„ (/var/www)</h4>
                    <p class="text-xs text-slate-300">æ“æœ‰è€…å…¨æ¬Šç®¡ç†ï¼Œå…¶ä»–äººåªèƒ½è®€å–å’Œé€²å…¥ç€è¦½ã€‚</p>
                    <div class="mt-2 text-right text-xs text-slate-400 font-mono">é»æ“Šè¨­å®š -> 755</div>
                </div>
                <div class="bg-slate-700 p-4 rounded hover:bg-slate-600 transition cursor-pointer"
                    onclick="setScenario(7,7,7)">
                    <h4 class="font-bold text-red-400 mb-2">å±éšªå…¨é–‹ (Do Not Use)</h4>
                    <p class="text-xs text-slate-300">æ‰€æœ‰äººéƒ½å¯è®€å¯«åŸ·è¡Œã€‚é€šå¸¸åƒ…ç”¨æ–¼é™¤éŒ¯ï¼Œæ¥µä¸å®‰å…¨ã€‚</p>
                    <div class="mt-2 text-right text-xs text-slate-400 font-mono">é»æ“Šè¨­å®š -> 777</div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-slate-200 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center text-slate-500 text-sm">
            <p>&copy; 2023 Linux Permissions Interactive Guide.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- State Management ---
        const state = {
            u: 7, // User
            g: 5, // Group
            o: 5  // Others
        };

        let chartInstance = null;

        // --- Core Logic ---

        function calculatePermissions() {
            // Recalculate based on checked boxes
            const targets = ['u', 'g', 'o'];
            targets.forEach(t => {
                let sum = 0;
                document.querySelectorAll(`input[data-target="${t}"]:checked`).forEach(cb => {
                    sum += parseInt(cb.getAttribute('data-val'));
                });
                state[t] = sum;
            });

            updateUI();
            updateChart();
        }

        function updateState() {
            calculatePermissions();
        }

        // Convert numeric state to symbolic (e.g., 7 -> rwx)
        function getSymbolic(num) {
            const r = (num & 4) ? 'r' : '-';
            const w = (num & 2) ? 'w' : '-';
            const x = (num & 1) ? 'x' : '-';
            return r + w + x;
        }

        // Generate human readable summary
        function getSummary() {
            const summaries = {
                7: "å®Œå…¨æ§åˆ¶ (rwx)",
                6: "è®€å–èˆ‡å¯«å…¥ (rw-)",
                5: "è®€å–èˆ‡åŸ·è¡Œ (r-x)",
                4: "åƒ…è®€å– (r--)",
                3: "å¯«å…¥èˆ‡åŸ·è¡Œ (-wx)",
                2: "åƒ…å¯«å…¥ (-w-)",
                1: "åƒ…åŸ·è¡Œ (--x)",
                0: "ç„¡æ¬Šé™ (---)"
            };

            let text = `<strong>è§£è®€ï¼š</strong> `;
            text += `æ“æœ‰è€…${summaries[state.u]}ï¼Œ`;
            text += `ç¾¤çµ„${summaries[state.g]}ï¼Œ`;
            text += `å…¶ä»–äºº${summaries[state.o]}ã€‚`;

            // Contextual hints
            const fullCode = `${state.u}${state.g}${state.o}`;
            if (fullCode === '777') text += " <span class='text-red-600 font-bold'>âš ï¸ æ¥µåº¦ä¸å®‰å…¨ï¼</span>";
            if (fullCode === '755') text += " <span class='text-green-600 font-bold'>âœ… é©åˆç¨‹å¼è…³æœ¬æˆ–ç›®éŒ„ã€‚</span>";
            if (fullCode === '644') text += " <span class='text-green-600 font-bold'>âœ… é©åˆä¸€èˆ¬è¨­å®šæª”ã€‚</span>";
            if (fullCode === '600' || fullCode === '700') text += " <span class='text-blue-600 font-bold'>ğŸ”’ ç§å¯†æª”æ¡ˆæ¨¡å¼ã€‚</span>";

            return text;
        }

        function updateUI() {
            // Update big number display
            document.getElementById('val-u').textContent = state.u;
            document.getElementById('val-g').textContent = state.g;
            document.getElementById('val-o').textContent = state.o;

            // Update Result Card
            document.getElementById('res-numeric').textContent = `${state.u}${state.g}${state.o}`;
            document.getElementById('res-symbolic').textContent = `-${getSymbolic(state.u)}${getSymbolic(state.g)}${getSymbolic(state.o)}`;

            // Update summary
            document.getElementById('human-summary').innerHTML = getSummary();
        }

        // --- Chart.js Visualization ---
        function initChart() {
            const ctx = document.getElementById('permChart').getContext('2d');

            chartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['æ“æœ‰è€… (User)', 'ç¾¤çµ„ (Group)', 'å…¶ä»–äºº (Others)'],
                    datasets: [{
                        label: 'æ¬Šé™ç­‰ç´š (0-7)',
                        data: [state.u, state.g, state.o],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.6)', // Blue
                            'rgba(16, 185, 129, 0.6)', // Emerald
                            'rgba(245, 158, 11, 0.6)'  // Amber
                        ],
                        borderColor: [
                            'rgb(59, 130, 246)',
                            'rgb(16, 185, 129)',
                            'rgb(245, 158, 11)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 7,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    return `æ•¸å€¼: ${context.raw} (${getSymbolic(context.raw)})`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateChart() {
            if (chartInstance) {
                chartInstance.data.datasets[0].data = [state.u, state.g, state.o];
                chartInstance.update();
            }
        }

        // --- Helper Functions ---

        function setScenario(u, g, o) {
            // Helper to set bits based on integer
            const setBits = (target, val) => {
                document.querySelector(`input[data-target="${target}"][data-val="4"]`).checked = (val & 4) > 0;
                document.querySelector(`input[data-target="${target}"][data-val="2"]`).checked = (val & 2) > 0;
                document.querySelector(`input[data-target="${target}"][data-val="1"]`).checked = (val & 1) > 0;
            };

            setBits('u', u);
            setBits('g', g);
            setBits('o', o);

            calculatePermissions(); // Trigger updates

            // Scroll top slightly to show change
            document.getElementById('simulator').scrollIntoView({ behavior: 'smooth' });
        }

        function copyCommand() {
            const text = `chmod ${state.u}${state.g}${state.o} filename`;
            copyText(text);
        }

        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert(`å·²è¤‡è£½: ${text}`);
            });
        }

        function navTo(id) {
            // Simple Tab Logic
            document.querySelectorAll('section').forEach(sec => {
                // Not hiding sections fully to allow scrolling, but we could focus
            });
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });

            // Update Active State
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('inactive-tab');
            });
            document.getElementById(`nav-${id}`).classList.add('active-tab');
            document.getElementById(`nav-${id}`).classList.remove('inactive-tab');
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            initChart();
            updateUI(); // Initial sync
        });

    </script>
</body>

</html>